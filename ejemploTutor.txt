passport.use(
    new LocalStrategy({
        usernameField: 'email',
        passwordField: 'password',
        passReqToCallback: true
    },
    async (req, email, password,done) =>{
        try{
            const user = await UsersModel.findOne({email: email});
            if(!user) done(null, false)
            const passwordCorrect = await bcrypt.compare(password, user.password);
            if(!passwordCorrect) done(null, false);
            done(null, user);
        } catch(err){
            done(err, false);
        }
    }
)

export default passport;